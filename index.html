<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vahan Bazar — Two-Wheeler Marketplace (Demo)</title>
  <meta name="description" content="Browse bikes, scooters & EVs — filters, comparison, calculators, bookings" />
  <style>
    /* Mobile-first base styles */
    :root{
      --accent:#2199a6fb;
      --muted:#0e0f0c;
      --card:#07eca3;
      --bg:#ffffff50;
      --glass: rgb(2, 2, 9);
      --shadow: 0 6px 18px rgb(23, 15, 15);
      --radius:14px;
      --max-width:1200px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:#0f172a}
    a{color:var(--accent);text-decoration:none}
    img{max-width:100%;display:block}
    .container{max-width:var(--max-width);margin:0 auto;padding:16px}

    /* Header/Nav */
    header{background:linear-gradient(180deg,rgba(11,113,243,0.06),transparent);backdrop-filter:blur(4px);position:sticky;top:0;z-index:40;border-bottom:1px solid rgba(15,23,42,0.04)}
    .nav{display:flex;align-items:center;gap:12px;justify-content:space-between;padding:12px 0}
    .brand{display:flex;gap:10px;align-items:center;font-weight:700}
    .brand .logo{width:44px;height:44px;background:linear-gradient(90deg,var(--accent),#06d6a0);border-radius:10px;display:flex;align-items:center;justify-content:center;color:white;font-weight:800}
    .searchbox{flex:1;display:flex;align-items:center;gap:8px;margin-left:12px}
    .searchbox input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid rgba(15,23,42,0.06);background:white}
    .nav-actions{display:flex;gap:10px;align-items:center}
    .btn{padding:8px 12px;border-radius:10px;background:var(--accent);color:#fff;border:none;cursor:pointer;box-shadow:var(--shadow)}
    .ghost{background:transparent;border:1px solid rgba(15,23,42,0.06);padding:8px 10px;border-radius:10px}

    /* Grid layout */
    .layout{display:grid;grid-template-columns:1fr;gap:16px;padding:16px 0}
    @media(min-width:980px){
      .layout{grid-template-columns:400px 1fr;align-items:start}
    }

    /* Sidebar / Filters */
    .sidebar{background:var(--card);border-radius:12px;padding:14px;box-shadow:var(--shadow)}
    .filter-group{margin-bottom:12px}
    .filter-title{font-weight:700;margin-bottom:8px}
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{padding:8px 10px;border-radius:10px;background:rgba(15,23,42,0.04);cursor:pointer}
    .chip.active{background:var(--accent);color:#fff}
    .range{display:flex;gap:8px;align-items:center}
    .select{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(15,23,42,0.06)}

    /* Content area */
    .topbar{display:flex;justify-content:space-between;gap:12px;align-items:center;margin-bottom:12px}
    .cards{display:grid;grid-template-columns:1fr;gap:20px}
    @media(min-width:640px){.cards{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:1100px){.cards{grid-template-columns:repeat(3,1fr)}}

    .card{background:var(--card);border-radius:12px;overflow:hidden;box-shadow:var(--shadow);display:flex;flex-direction:column}
    .card .media{height:160px;background:linear-gradient(180deg,#eef6ff,#fff);display:flex;align-items:center;justify-content:center}
    .card .body{padding:12px;display:flex;flex-direction:column;gap:8px}
    .title{font-weight:700}
    .specs{display:flex;gap:10px;flex-wrap:wrap;color:var(--muted);font-size:13px}
    .price{font-weight:800;color:var(--accent)}
    .card-actions{display:flex;gap:8px;margin-top:8px}
    .small{padding:6px 8px;font-size:13px}

    /* Comparison bar */
    .compare-bar{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;background:rgba(255,255,255,0.98);padding:10px 14px;border-radius:999px;box-shadow:var(--shadow);display:flex;gap:10px;align-items:center}
    .compare-bar.hide{display:none}

    /* Sections: upcoming, showrooms, used */
    .section{background:linear-gradient(180deg,white,white);padding:14px;border-radius:14px;box-shadow:var(--shadow)}
    .grid-2{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:900px){.grid-2{grid-template-columns:1fr 1fr}}

    /* Calculators */
    .calc-row{display:flex;gap:8px;flex-wrap:wrap}
    .calc-row input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(15,23,42,0.06)}

    /* Modals / overlays */
    .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.45);z-index:60}
    .modal-card{width:95%;max-width:820px;background:white;padding:14px;border-radius:12px}

    /* Utilities */
    .muted{color:var(--muted)}
    .flex{display:flex;align-items:center}
    .stack{display:flex;flex-direction:column}
    .badge{background:rgba(6,182,212,0.12);color:#05606b;padding:6px 8px;border-radius:999px;font-weight:700}
    footer{padding:20px;text-align:center;color:var(--muted)}

    /* small tweaks */
    .sublabel{font-size:13px;color:var(--muted)}
    input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}

  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div style="display:flex;align-items:center;flex:1">
        <div class="brand">
          <div class="logo">VB</div>
          <div>
            <div style="font-size:14px">Vahan Bazar</div>
            <div class="sublabel">Find your next ride</div>
          </div>
        </div>
        <div class="searchbox" style="margin-left:18px">
          <input id="globalSearch" placeholder="Search model, brand, or spec — e.g. " aria-label="Search" />
          <button class="ghost" id="clearSearch">Clear</button>
        </div>
      </div>
      <div class="nav-actions">
        <button class="ghost" id="toggleFilters">Filters</button>
        <button class="btn" id="openBooking">Book Test Ride</button>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="layout">
      <!-- SIDEBAR FILTERS -->
      <aside class="sidebar" id="sidebar">
        <div class="filter-group">
          <div class="filter-title">Category</div>
          <div class="chips" id="categoryChips">
            <div class="chip active" data-cat="all">All</div>
            <div class="chip" data-cat="bike">Bikes</div>
            <div class="chip" data-cat="scooter">Scooters</div>
            <div class="chip" data-cat="ev">EVs</div>
          </div>
        </div>
        <div class="filter-group">
          <div class="filter-title">Brand</div>
          <select class="select" id="brandSelect">
            <option value="all">All Brands</option>
          </select>
        </div>
        <div class="filter-group">
          <div class="filter-title">Price range (₹)</div>
          <div class="range">
            <input id="priceMin" type="number" placeholder="Min" />
            <input id="priceMax" type="number" placeholder="Max" />
          </div>
        </div>
        <div class="filter-group">
          <div class="filter-title">Fuel / Power</div>
          <div class="chips" id="fuelChips">
            <div class="chip active" data-fuel="all">All</div>
            <div class="chip" data-fuel="petrol">Petrol</div>
            <div class="chip" data-fuel="diesel">Diesel</div>
            <div class="chip" data-fuel="ev">Electric</div>
          </div>
        </div>
        <div style="display:flex;gap:8px;justify-content:space-between;margin-top:8px">
          <button class="btn" id="applyFilters">Apply</button>
          <button class="ghost" id="resetFilters">Reset</button>
        </div>

        <hr style="margin:12px 0;border:none;border-top:1px solid rgba(15,23,42,0.04)" />

        <div class="filter-group">
          <div class="filter-title">EMI Calculator</div>
          <div class="stack">
            <input id="emiPrice" type="number" placeholder="On-road price (₹)" />
            <input id="emiDown" type="number" placeholder="Down payment (₹)" />
            <div style="display:flex;gap:8px;margin-top:8px">
              <input id="emiRate" type="number" placeholder="Interest % p.a." value="9" />
              <input id="emiTenure" type="number" placeholder="Tenure (months)" value="36" />
            </div>
            <button class="btn small" id="calcEmi" style="margin-top:8px">Calculate EMI</button>
            <div id="emiResult" class="sublabel"></div>
          </div>
        </div>

        <div class="filter-group">
          <div class="filter-title">Fuel Cost Calculator</div>
          <div class="stack">
            <input id="fuelEfficiency" type="number" placeholder="km per litre (or kWh/100km for EV)" />
            <input id="fuelPrice" type="number" placeholder="Fuel price (₹/L or ₹/kWh)" />
            <input id="fuelDistance" type="number" placeholder="Planned distance (km)" />
            <button class="btn small" id="calcFuel" style="margin-top:8px">Estimate Cost</button>
            <div id="fuelResult" class="sublabel"></div>
          </div>
        </div>

      </aside>

      <!-- MAIN CONTENT -->
      <section>
        <div class="topbar">
          <div>
            <div style="font-weight:800">Browse Vehicles</div>
            <div class="sublabel">Showing <span id="resultCount">0</span> results</div>
          </div>
          <div style="display:flex;gap:8px;align-items:center">
            <select id="sortSelect" class="select">
              <option value="relevance">Sort: Relevance</option>
              <option value="price-asc">Price: Low to High</option>
              <option value="price-desc">Price: High to Low</option>
            </select>
            <button class="ghost" id="viewCompare">Compare (<span id="compareCount">0</span>)</button>
          </div>
        </div>

        <div class="cards" id="cards"></div>

        <div style="height:8px"></div>

        <div style="display:grid;gap:12px;margin-top:12px">
          <div class="section">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div><div style="font-weight:800">Upcoming Launches</div><div class="sublabel">Stay ahead — new models arriving soon</div></div>
              <a href="#">View calendar</a>
            </div>
            <div class="grid-2" id="upcoming">
              <!-- upcoming items populated by JS -->
            </div>
          </div>

          <div class="section">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div><div style="font-weight:800">Nearby Showrooms</div><div class="sublabel">Find & contact authorized dealers</div></div>
              <a href="#">Map</a>
            </div>
            <div id="showrooms" style="display:grid;gap:8px;margin-top:8px"></div>
          </div>

          <div class="section">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div><div style="font-weight:800">Used Bike Listings</div><div class="sublabel">Verified pre-owned options</div></div>
              <a href="#">Sell your bike</a>
            </div>
            <div id="used" style="display:grid;gap:8px;margin-top:8px"></div>
          </div>

        </div>
      </section>
    </div>

  </main>

  <!-- Compare bar -->
  <div id="compareBar" class="compare-bar hide">
    <div class="sublabel">Compare selected (<span id="compareBarCount">0</span>)</div>
    <button class="ghost" id="openCompare">Open</button>
    <button class="btn" id="compareNow">Compare Now</button>
  </div>

  <!-- Modal templates -->
  <div id="modalRoot" style="display:none"></div>

  <footer>
    © <span id="year"></span> Vahan Bazar — Demo UI · Built for speed & mobile-first UX
  </footer>

  <script>
    // Demo dataset for vehicles (small). In a real app this would come from an API.
    const VEHICLES = [
      {id:1,category:'bike',brand:'Hero',model:'Xtreme 160R',price:128000,fuel:'petrol',kms:45,watt:null,img:'https://media.zigcdn.com/media/model/2024/Jul/right-side-view-1474779778_930x620.jpg'},
      {id:2,category:'scooter',brand:'Honda',model:'Activa 6G',price:72000,fuel:'petrol',kms:50,watt:null,img:'https://tse4.mm.bing.net/th/id/OIP.HSgsOCBFQ7hJhdN4IattUAHaE8?rs=1&pid=ImgDetMain&o=7&rm=3'},
      {id:3,category:'ev',brand:'Ather',model:'450X',price:139000,fuel:'ev',kms:null,watt:'2.9kWh/100km',img:'https://cdni.autocarindia.com/ExtraImages/20220722124205_Ather_1.jpg'},
      {id:4,category:'bike',brand:'Yamaha',model:'FZ-S',price:115000,fuel:'petrol',kms:40,watt:null,img:'https://img-cdn.thepublive.com/fit-in/1280x960/filters:format(webp)/bnn/media/post_attachments/content/uploads/2023/10/yamaha-fz-s-f1-v4-new-colours-20231005044840.jpg'},
      {id:5,category:'ev',brand:'Ola',model:'S1 Pro',price:105000,fuel:'ev',kms:null,watt:'3.0kWh/100km',img:'https://www.autobics.com/wp-content/uploads/2023/08/2023-Ola-S1-Pro-Matwhite.jpg'},
      {id:6,category:'scooter',brand:'TVS',model:'NTorq',price:92000,fuel:'petrol',kms:38,watt:null,img:'https://bd.gaadicdn.com/processedimages/tvs/ntorq-125/source/ntorq-125663b09a6908ab.jpg'}
    ];

    const UPCOMING = [
      {title:'Yamaha R15 v4',date:'2025-10-14',desc:'Expected facelift with electronics improvements'},
      {title:'Hero Electric New Model',date:'2025-11-03',desc:'Affordable city EV from Hero Electric'}
    ];

    const SHOWROOMS = [
      {name:'Speed Motors - Koramangala',phone:'+91 98765 43210',address:'Koramangala, Bangalore'},
      {name:'Premium Bikes',phone:'+91 91234 56789',address:'MG Road, Bangalore'}
    ];

    const USED = [
      {title:'2019 Honda Activa',price:42000,kms:15000,location:'Bengaluru'},
      {title:'2018 TVS Apache',price:55000,kms:22000,location:'Bengaluru'}
    ];

    // App state
    let state = {
      q:'',
      category:'all',
      brand:'all',
      priceMin:null,
      priceMax:null,
      fuel:'all',
      selectedCompare:[]
    }

    // DOM refs
    const cards = document.getElementById('cards');
    const brandSelect = document.getElementById('brandSelect');
    const resultCount = document.getElementById('resultCount');
    const compareCount = document.getElementById('compareCount');
    const compareBar = document.getElementById('compareBar');
    const compareBarCount = document.getElementById('compareBarCount');

    // initialize
    document.getElementById('year').textContent = new Date().getFullYear();

    function populateBrandOptions(){
      const brands = Array.from(new Set(VEHICLES.map(v=>v.brand))).sort();
      brands.forEach(b=>{
        const opt = document.createElement('option');opt.value=b;opt.textContent=b;brandSelect.appendChild(opt);
      })
    }

    function renderCards(list){
      cards.innerHTML='';
      list.forEach(v=>{
        const el = document.createElement('article');el.className='card';
        el.innerHTML = `
          <div class="media"><img loading="lazy" src="${v.img}" alt="${v.brand} ${v.model}" style="max-height:140px;object-fit:cover;width:100%"/></div>
          <div class="body">
            <div style="display:flex;justify-content:space-between;align-items:start">
              <div>
                <div class="title">${v.brand} ${v.model}</div>
                <div class="sublabel">${v.category.toUpperCase()} · ${v.fuel.toUpperCase()}</div>
              </div>
              <div class="price">₹ ${v.price.toLocaleString()}</div>
            </div>
            <div class="specs">
              ${v.kms?`<div>${v.kms} km/l</div>`:''}
              ${v.watt?`<div>${v.watt}</div>`:''}
              <div>${v.model}</div>
            </div>
            <div class="card-actions">
              <button class="ghost small" data-id="${v.id}" onclick="openDetails(${v.id})">Details</button>
              <button class="ghost small" onclick="toggleCompare(${v.id})">Compare</button>
              <button class="btn small" onclick="quickBook(${v.id})">Book Test Ride</button>
            </div>
          </div>
        `;
        cards.appendChild(el);
      })
      resultCount.textContent = list.length;
    }

    // filtering pipeline
    function applyFilters(){
      let list = VEHICLES.slice();
      // search
      if(state.q && state.q.trim().length>0){
        const q = state.q.toLowerCase();
        list = list.filter(v=> (v.brand + ' ' + v.model).toLowerCase().includes(q) );
      }
      if(state.category!=='all') list = list.filter(v=>v.category===state.category);
      if(state.brand && state.brand!=='all') list = list.filter(v=>v.brand===state.brand);
      if(state.fuel && state.fuel!=='all') list = list.filter(v=>v.fuel===state.fuel);
      if(state.priceMin) list = list.filter(v=>v.price >= Number(state.priceMin));
      if(state.priceMax) list = list.filter(v=>v.price <= Number(state.priceMax));

      // sort
      const sort = document.getElementById('sortSelect').value;
      if(sort==='price-asc') list.sort((a,b)=>a.price-b.price);
      if(sort==='price-desc') list.sort((a,b)=>b.price-a.price);

      renderCards(list);
    }

    // UI helpers
    function attachChips(){
      document.querySelectorAll('#categoryChips .chip').forEach(c=>{
        c.addEventListener('click',()=>{
          document.querySelectorAll('#categoryChips .chip').forEach(x=>x.classList.remove('active'));
          c.classList.add('active'); state.category = c.dataset.cat; applyFilters();
        })
      })
      document.querySelectorAll('#fuelChips .chip').forEach(c=>{
        c.addEventListener('click',()=>{
          document.querySelectorAll('#fuelChips .chip').forEach(x=>x.classList.remove('active'));
          c.classList.add('active'); state.fuel = c.dataset.fuel; applyFilters();
        })
      })
    }

    function attachControls(){
      document.getElementById('globalSearch').addEventListener('input',e=>{state.q=e.target.value;applyFilters();});
      document.getElementById('clearSearch').addEventListener('click',()=>{document.getElementById('globalSearch').value='';state.q='';applyFilters();});
      brandSelect.addEventListener('change',e=>{state.brand=e.target.value;applyFilters();});
      document.getElementById('applyFilters').addEventListener('click',()=>{
        state.priceMin = document.getElementById('priceMin').value || null;
        state.priceMax = document.getElementById('priceMax').value || null;
        applyFilters();
      });
      document.getElementById('resetFilters').addEventListener('click',()=>{
        state={...state,category:'all',brand:'all',priceMin:null,priceMax:null,fuel:'all',q:''};
        document.getElementById('priceMin').value='';document.getElementById('priceMax').value='';document.getElementById('globalSearch').value='';brandSelect.value='all';
        document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
        document.querySelector('#categoryChips .chip[data-cat="all"]').classList.add('active');
        document.querySelector('#fuelChips .chip[data-fuel="all"]').classList.add('active');
        applyFilters();
      });

      document.getElementById('calcEmi').addEventListener('click',()=>{
        const P = Number(document.getElementById('emiPrice').value || 0) - Number(document.getElementById('emiDown').value || 0);
        const r = Number(document.getElementById('emiRate').value || 0)/1200; // monthly
        const n = Number(document.getElementById('emiTenure').value || 1);
        if(P<=0){document.getElementById('emiResult').textContent='Enter a valid price and down payment.';return}
        const emi = (P * r) / (1 - Math.pow(1+r,-n));
        document.getElementById('emiResult').textContent = `Monthly EMI: ₹ ${Math.round(emi).toLocaleString()} (tenure ${n} months)`;
      });

      document.getElementById('calcFuel').addEventListener('click',()=>{
        const eff = Number(document.getElementById('fuelEfficiency').value || 0);
        const price = Number(document.getElementById('fuelPrice').value || 0);
        const dist = Number(document.getElementById('fuelDistance').value || 0);
        if(!eff || !price || !dist){document.getElementById('fuelResult').textContent='Enter efficiency, price and distance.';return}
        // cost = (distance / efficiency) * fuelPrice
        const cost = (dist/eff)*price;
        document.getElementById('fuelResult').textContent = `Estimated fuel cost: ₹ ${cost.toFixed(0)}`;
      });

      document.getElementById('toggleFilters').addEventListener('click',()=>{
        const s = document.getElementById('sidebar'); s.style.display = s.style.display === 'none' ? 'block' : 'none';
      });

      document.getElementById('openBooking').addEventListener('click',()=>openBookingForm());
      document.getElementById('viewCompare').addEventListener('click',()=>openCompareModal());
      document.getElementById('compareNow').addEventListener('click',()=>openCompareModal());
    }

    // Comparison
    function toggleCompare(id){
      const idx = state.selectedCompare.indexOf(id);
      if(idx===-1){ state.selectedCompare.push(id); } else { state.selectedCompare.splice(idx,1); }
      updateCompareUI();
    }
    function updateCompareUI(){
      compareCount.textContent = state.selectedCompare.length;
      compareBarCount.textContent = state.selectedCompare.length;
      document.getElementById('compareCount').textContent = state.selectedCompare.length;
      if(state.selectedCompare.length>0){ compareBar.classList.remove('hide'); } else { compareBar.classList.add('hide'); }
    }

    function openCompareModal(){
      if(state.selectedCompare.length<2){alert('Select at least 2 items to compare');return}
      const selected = VEHICLES.filter(v=>state.selectedCompare.includes(v.id));
      const m = document.createElement('div');m.className='modal';
      m.innerHTML = `<div class="modal-card">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <div style="font-weight:800">Comparison</div>
          <button class="ghost" id="closeCmp">Close</button>
        </div>
        <div style="display:grid;grid-template-columns:repeat(${selected.length},1fr);gap:10px">
          ${selected.map(s=>`<div style="padding:8px;border-radius:8px;background:#f8fafc"><div style="font-weight:700">${s.brand} ${s.model}</div><div class="sublabel">₹ ${s.price.toLocaleString()}</div><div class="sublabel">${s.fuel.toUpperCase()}</div></div>`).join('')}
        </div>
      </div>`;
      document.body.appendChild(m);
      document.getElementById('closeCmp').addEventListener('click',()=>m.remove());
    }

    // Details & booking
    function openDetails(id){
      const v = VEHICLES.find(x=>x.id===id); if(!v) return;
      const m = document.createElement('div');m.className='modal';
      m.innerHTML = `<div class="modal-card">
        <div style="display:flex;gap:12px">
          <img src="${v.img}" style="width:40%;height:160px;object-fit:cover;border-radius:8px"/>
          <div style="flex:1">
            <div style="display:flex;justify-content:space-between;align-items:start"><div><div style="font-weight:800">${v.brand} ${v.model}</div><div class="sublabel">${v.category.toUpperCase()}</div></div><div class="price">₹ ${v.price.toLocaleString()}</div></div>
            <p class="sublabel" style="margin-top:8px">Quick specs and highlights for the model. This demo includes a short description to show layout.</p>
            <div style="display:flex;gap:8px;margin-top:10px"><button class="btn" id="bookNow">Book Test Ride</button><button class="ghost" id="closeDet">Close</button></div>
          </div>
        </div>
      </div>`;
      document.body.appendChild(m);
      document.getElementById('closeDet').addEventListener('click',()=>m.remove());
      document.getElementById('bookNow').addEventListener('click',()=>{m.remove(); quickBook(id)});
    }

    function quickBook(id){
      const v = VEHICLES.find(x=>x.id===id);
      openBookingForm(v);
    }

    function openBookingForm(vehicle=null){
      const m = document.createElement('div');m.className='modal';
      m.innerHTML = `<div class="modal-card">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <div style="font-weight:800">Book Test Ride</div>
          <button class="ghost" id="closeBook">Close</button>
        </div>
        <div style="display:grid;gap:8px">
          <select id="bookVehicle" class="select">
            ${VEHICLES.map(v=>`<option value="${v.id}" ${vehicle && vehicle.id===v.id? 'selected' : ''}>${v.brand} ${v.model} — ₹ ${v.price.toLocaleString()}</option>`).join('')}
          </select>
          <input id="bookName" placeholder="Your name" />
          <input id="bookPhone" placeholder="Phone (10 digits)" />
          <input id="bookDate" type="date" />
          <div style="display:flex;gap:8px"><button class="btn" id="submitBook">Submit</button><button class="ghost" id="cancelBook">Cancel</button></div>
          <div id="bookMsg" class="sublabel"></div>
        </div>
      </div>`;
      document.body.appendChild(m);
      document.getElementById('closeBook').addEventListener('click',()=>m.remove());
      document.getElementById('cancelBook').addEventListener('click',()=>m.remove());
      document.getElementById('submitBook').addEventListener('click',()=>{
        const name = document.getElementById('bookName').value.trim();
        const phone = document.getElementById('bookPhone').value.trim();
        const date = document.getElementById('bookDate').value;
        if(!name || !/^\d{10}$/.test(phone) || !date){ document.getElementById('bookMsg').textContent='Please enter name, 10-digit phone and date'; return }
        // fake submit
        document.getElementById('bookMsg').textContent = `Thanks ${name}! Test ride booked for ${date}. Dealer will contact ${phone}.`;
        setTimeout(()=>m.remove(),2500);
      });
    }

    // populate upcoming/showrooms/used sections
    function renderAux(){
      const up = document.getElementById('upcoming'); up.innerHTML='';
      UPCOMING.forEach(u=>{const d=document.createElement('div');d.innerHTML=`<div style="font-weight:700">${u.title}</div><div class="sublabel">${u.date}</div><div class="sublabel">${u.desc}</div>`;up.appendChild(d)});
      const sh = document.getElementById('showrooms'); sh.innerHTML=''; SHOWROOMS.forEach(s=>{const d=document.createElement('div');d.innerHTML=`<div style="display:flex;justify-content:space-between"><div><div style="font-weight:700">${s.name}</div><div class="sublabel">${s.address}</div></div><div><a href="tel:${s.phone}">Call</a></div></div>`;sh.appendChild(d)});
      const us = document.getElementById('used'); us.innerHTML=''; USED.forEach(u=>{const d=document.createElement('div');d.innerHTML=`<div style="display:flex;justify-content:space-between"><div><div style="font-weight:700">${u.title}</div><div class="sublabel">${u.kms} km · ${u.location}</div></div><div class="price">₹ ${u.price.toLocaleString()}</div></div>`;us.appendChild(d)});
    }

    // populate brands and init
    populateBrandOptions(); attachChips(); attachControls(); renderAux(); applyFilters(); updateCompareUI();

    // small performance nicety: lazy-load images (native loading used) and simple keyboard support
    document.addEventListener('keydown',e=>{ if(e.key==='Escape'){ document.querySelectorAll('.modal').forEach(m=>m.remove()) } });

    // expose for inline onclicks in template
    window.openDetails = openDetails; window.toggleCompare = toggleCompare; window.quickBook = quickBook; window.openCompareModal = openCompareModal;

  </script>
</body>
</html>